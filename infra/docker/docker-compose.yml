networks:
  symbiose-net:
    driver: bridge

services:
  unified-api:
    container_name: unified-api
    
    build:
      context: /Users/morpheus/energyflow-cosmology
      dockerfile: infra/docker/Dockerfile.unified_api

    env_file:
      - /Users/morpheus/energyflow-cosmology/.env

    environment:
      PORT: "8080"

    ports:
      - "8080:8080"

    restart: unless-stopped

    networks:
      - symbiose-net

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 10s
      timeout: 3s
      retries: 5
      start_period: 5s

